<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>GUtil (lablgtk3.GUtil)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">lablgtk3</a> &#x00BB; GUtil</nav><h1>Module <code>GUtil</code></h1><h3 id="utility-classes-for-programming-with-gtk-objects"><a href="#utility-classes-for-programming-with-gtk-objects" class="anchor"></a>Utility classes for programming with GTK objects</h3><nav class="toc"><ul><li><a href="#the-ml-signal-mechanism">The ML signal mechanism</a></li><li><a href="#propagating-state-modifications">Propagating state modifications</a></li></ul></nav></header><dl><dt class="spec value" id="val-print_widget"><a href="#val-print_widget" class="anchor"></a><code><span class="keyword">val </span>print_widget : Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="../GObj/index.html">GObj</a>.#widget <span>&#45;&gt;</span> unit</code></dt><dd><p>A nice function to use with <code>#install_printer</code></p></dd></dl><aside><p>The memo class provides an easy way to remember the real class of a widget. Insert all widgets of class in one single <code>t memo</code>, and you can then recover their original ML object with <code>#find</code>.</p></aside><div class="spec class" id="class-memo"><a href="#class-memo" class="anchor"></a><code><span class="keyword">class </span>'a<a href="class-memo/index.html">memo</a> : unit <span>&#45;&gt;</span> <span class="keyword">object</span> ... <span class="keyword">end</span></code></div><section><header><h4 id="the-ml-signal-mechanism"><a href="#the-ml-signal-mechanism" class="anchor"></a>The ML signal mechanism</h4><p>It allows one to add GTK-like signals to arbitrary objects.</p></header><dl><dt class="spec value" id="val-next_callback_id"><a href="#val-next_callback_id" class="anchor"></a><code><span class="keyword">val </span>next_callback_id : unit <span>&#45;&gt;</span> <a href="../GtkSignal/index.html#type-id">GtkSignal.id</a></code></dt></dl><div class="spec class" id="class-signal"><a href="#class-signal" class="anchor"></a><code><span class="keyword">class </span>'a<a href="class-signal/index.html">signal</a> : unit <span>&#45;&gt;</span> <span class="keyword">object</span> ... <span class="keyword">end</span></code></div><aside><p>As with GTK signals, you can use <code>GtkSignal.stop_emit</code> inside a callback to prevent other callbacks from being called.</p></aside><div class="spec class" id="class-ml_signals"><a href="#class-ml_signals" class="anchor"></a><code><span class="keyword">class </span><span class="keyword">virtual </span><a href="class-ml_signals/index.html">ml_signals</a> : (<a href="../GtkSignal/index.html#type-id">GtkSignal.id</a> <span>&#45;&gt;</span> bool) list <span>&#45;&gt;</span> <span class="keyword">object</span> ... <span class="keyword">end</span></code></div><div class="spec class" id="class-add_ml_signals"><a href="#class-add_ml_signals" class="anchor"></a><code><span class="keyword">class </span><span class="keyword">virtual </span><a href="class-add_ml_signals/index.html">add_ml_signals</a> : <span class="type-var">'a</span> <a href="../Gtk/index.html#type-obj">Gtk.obj</a> <span>&#45;&gt;</span> (<a href="../GtkSignal/index.html#type-id">GtkSignal.id</a> <span>&#45;&gt;</span> bool) list <span>&#45;&gt;</span> <span class="keyword">object</span> ... <span class="keyword">end</span></code></div><aside><p>To add ML signals to a LablGTK object:</p><pre><code class="ml">class mywidget_signals obj ~mysignal1 ~mysignal2 = object
  inherit somewidget_signals obj
  inherit add_ml_signals obj [mysignal1#disconnect; mysignal2#disconnect]
  method mysignal1 = mysignal1#connect ~after
  method mysignal2 = mysignal2#connect ~after
end

class mywidget obj = object (self)
  inherit somewidget obj
  val mysignal1 = new signal obj
  val mysignal2 = new signal obj
  method connect = new mywidget_signals obj ~mysignal1 ~mysignal2
  method call1 = mysignal1#call
  method call2 = mysignal2#call
end</code></pre><p>You can also add ML signals to an arbitrary object; just inherit from <code>ml_signals</code> in place of <code>widget_signals</code>+<code>add_ml_signals</code>.</p><pre><code class="ml">class mysignals ~mysignal1 ~mysignal2 = object
   inherit ml_signals [mysignal1#disconnect; mysignal2#disconnect]
   method mysignal1 = mysignal1#connect ~after
   method mysignal2 = mysignal2#connect ~after
 end</code></pre></aside></section><section><header><h4 id="propagating-state-modifications"><a href="#propagating-state-modifications" class="anchor"></a>Propagating state modifications</h4><p>The variable class provides an easy way to propagate state modifications. A new variable is created by <code>new variable init</code>. The <code>#set</code> method just calls the <code>set</code> signal, which by default only calls <code>real_set</code>. <code>real_set</code> sets the variable and calls <code>changed</code> when needed. Deep equality is used to compare values, but check is only done if there are callbacks for <code>changed</code>.</p></header><div class="spec class" id="class-variable_signals"><a href="#class-variable_signals" class="anchor"></a><code><span class="keyword">class </span>'a<a href="class-variable_signals/index.html">variable_signals</a> : set:<span class="type-var">'a</span> <a href="class-signal/index.html">signal</a> <span>&#45;&gt;</span> changed:<span class="type-var">'a</span> <a href="class-signal/index.html">signal</a> <span>&#45;&gt;</span> <span class="keyword">object</span> ... <span class="keyword">end</span></code></div><div class="spec class" id="class-variable"><a href="#class-variable" class="anchor"></a><code><span class="keyword">class </span>'a<a href="class-variable/index.html">variable</a> : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="keyword">object</span> ... <span class="keyword">end</span></code></div></section></div></body></html>